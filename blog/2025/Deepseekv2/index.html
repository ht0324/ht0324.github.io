<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>DeepSeek-V2 - Review | Hun Tae Kim</title> <meta name="author" content="Hun Tae Kim"> <meta name="description" content="My thoughts on the DeepSeek-V2 paper"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,600&amp;family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,500;0,8..60,600;0,8..60,700;1,8..60,400;1,8..60,600&amp;display=swap"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%9A%80&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ht0324.github.io/blog/2025/Deepseekv2/"> <link type="application/atom+xml" rel="alternate" href="https://ht0324.github.io/feed.xml" title="blank"> </head> <body class="fixed-top-nav " style="overflow-x: hidden; max-width: 100vw;"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title" href="/">Hun Tae Kim</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/Links/">Links</a> </li> <li class="nav-item "> <a class="nav-link" href="/CV/">CV</a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" style="overflow-x: hidden;"> <div class="post"> <header class="post-header"> <h1 class="post-title">DeepSeek-V2 - Review</h1> <div class="post-meta-wrapper"> <span> <i class="fas fa-calendar fa-sm"></i> January 25, 2025 </span> </div> <div class="post-tag-wrapper"> <a href="/blog/tag/ai" class="tag-pill"> <i class="fas fa-hashtag fa-sm"></i> AI</a> <a href="/blog/category/paper" class="tag-pill"> <i class="fas fa-folder fa-sm"></i> Paper</a> </div> </header> <article class="post-content"> <div id="markdown-content"> <p>In this post, I’ll discuss the DeepSeek-V2 paper, <a href="https://arxiv.org/abs/2405.04434" rel="external nofollow noopener" target="_blank">“DeepSeek-V2: A Strong, Economical, and Efficient Mixture-of-Experts Language Model”</a>, released by DeepSeek-AI. DeepSeek has been steadily releasing and open-sourcing language models, demonstrating consistent progress, particularly with their recent advances in Mixture-of-Experts (MoE) architectures and reinforcement learning methods.</p> <p>DeepSeek-V2 uses a new Multi-head Latent Attention (MLA) mechanism and an optimized MoE architecture called DeepSeek-MoE. It activates only 21B out of its 236B parameters per token, reducing inference and training costs while maintaining performance. This makes DeepSeek-V2 notable in a time when models are becoming increasingly large and computationally demanding.</p> <hr> <h3 id="key-concepts">Key Concepts</h3> <p><strong>Mixture-of-Experts (DeepSeek-MoE)</strong><br> DeepSeek-V2 employs a mixture-of-experts model, where each token activates only a small fraction (21B out of 236B) of the total parameters. Instead of having fewer large experts, they increased the number of experts while reducing their size and introduced a “shared expert.” This expert always participates, leveraging the observation that certain computations are common to all tokens. This decision helps balance computational efficiency with model performance.</p> <p><strong>Multi-head Latent Attention (MLA)</strong><br> The MLA mechanism compresses the Key-Value (KV) cache into a latent representation. This reduces memory usage (by about 93%) and enables faster inference. Instead of storing large sparse key-value pairs explicitly, the MLA creates compact latent vectors, decompressing them only when needed.</p> <p><strong>Group Relative Policy Optimization (GRPO)</strong><br> For reinforcement learning alignment, DeepSeek-V2 uses GRPO, a variant of PPO that removes the need for a separate value model. Instead, GRPO samples multiple responses, calculates the average advantage among them, and optimizes directly without an additional critic network. This reduces computational overhead.</p> <p><strong>Load Balancing via Auxiliary Loss</strong><br> To efficiently distribute computation across multiple GPUs, DeepSeek introduces auxiliary losses for balancing device and communication loads. Although not obvious, these losses are essential for effectively training large MoE models with limited GPU resources.</p> <hr> <h3 id="key-takeaways-what-i-learned">Key Takeaways (What I Learned)</h3> <p><strong>Simplicity That Works (MLA Mechanism)</strong><br> Initially, I didn’t expect such a straightforward compression idea like MLA to boost performance. Compressing the KV cache into a latent representation is simple and effective, addressing the memory bottleneck.</p> <p><strong>Sharing Experts is a Smart Move</strong><br> Using a shared expert, activated by all tokens, initially sounded counterintuitive for an MoE model focused on sparse computation. But it makes sense in practice, as some computations inevitably overlap. This approach balances specialization (MoE’s strength) with necessary generalization, effectively improving both training and inference efficiency.</p> <p><strong>Removing the Value Model from PPO (GRPO)</strong><br> The GRPO algorithm was another interesting approach. PPO typically uses a critic (value) model to calculate advantages, but DeepSeek simplified this by averaging multiple sampled outputs to estimate advantages directly. Eliminating the extra value model cuts computational costs without hurting performance—making RL more accessible and scalable.</p> <p><strong>Careful Load Balancing as a Necessary Trade-off</strong><br> Using auxiliary losses to balance GPU load and communication initially felt odd because it seemed unrelated to improving model capabilities directly. However, considering resource constraints, this trade-off is practical and necessary. DeepSeek carefully integrates this efficiency measure into training, revealing the reality that model development involves balancing ideal solutions with practical constraints.</p> <p><strong>DeepSeek’s Incremental Yet Thorough Progression</strong><br> Following DeepSeek historically, I noticed a consistent pattern of incremental, careful improvements. Unlike other models that appear seemingly out of nowhere, DeepSeek’s progress reflects systematic improvements in both architecture and training methods, resulting in DeepSeek-V2’s impressive balance of performance and efficiency.</p> <hr> <h3 id="summary--final-thoughts">Summary &amp; Final Thoughts</h3> <p>DeepSeek-V2 effectively balances efficiency, performance, and cost through thoughtful engineering choices. Techniques like MLA, shared MoE experts, and GRPO reveal that relatively simple innovations, executed thoroughly, often yield better outcomes than overly complicated architectures.</p> <p>I appreciated their transparency and thorough documentation. Overall, DeepSeek-V2 offers lessons on efficiently scaling models without compromising performance, solidifying DeepSeek as a strong contributor in the language model space.</p> </div> </article><div id="giscus_thread" style="max-width: 800px; margin: 0 auto;"> <script>let giscusTheme=localStorage.getItem("theme"),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"ht0324/ht0324.github.io","data-repo-id":"","data-category":"Comments","data-category-id":"","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Hun Tae Kim. All Rights Reserved. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-7ZMBS6JQKV"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7ZMBS6JQKV");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>